<div class="w-full  pr-6">




  <div class="  mx-auto justify-items-end ml-auto my-10   w-full container flex flex-row">

    <button (click)="navigateToAddnew()"
            class=" rounded-xl shadow-md text-center h-8 ml-1 mr-auto self-end text-xs md:text-sm w-36 p-2 text-cyan-800 bg-[#deecef]  hover:bg-blue-200 outline-none focus:ring-offset-emerald-950 ">New Budget</button>


    <tui-input
      [(ngModel)]="searchTerm"
      (ngModelChange)="updateSearchTerm()"
      placeholder="Search expenses..."
      appearance="outline"
      tuiTextfieldSize="s"
      tuiTextfieldIconLeft="false"
      [tuiTextfieldIcon]="tuiIconSearch"
      class="w-1/2 ml-auto rounded-xl shadow-md self-end"
      [tuiTextfieldCleaner]="true"

    ><input
      placeholder="Search"
      class="text-right "
      tuiTextfield

    />Search</tui-input>
  </div>
  <div  class=" mx-auto my-10 bg-white p-5 rounded-xl shadow-md w-full container ">
    <table tuiTable class="w-full">
      <thead>
      <tr tuiThGroup  >
        <th tuiTh [resizable]="true">Date</th>
        <th tuiTh [resizable]="true">Description</th>
        <th tuiTh [resizable]="true">Category</th>
        <th tuiTh [resizable]="true">Cost</th>

      </tr>
      </thead>
      <tbody tuiTbody>


      <ng-container *ngIf="!searchTerm; else filteredExpensesBlock">

        <tr *ngFor="let expense of expenses">
          <td tuiTd>
            <input
              *ngIf="expense.isEditing"
              [(ngModel)]="expense.date"
              type="date"
              class="border-2 border-stone-300 p-2 rounded-md"
            />
            <span *ngIf="!expense.isEditing">{{ expense.date }}</span>
          </td>
          <td tuiTd>
            <input
              *ngIf="expense.isEditing"
              [(ngModel)]="expense.description"
              type="text"
              class="border-2 border-stone-300 p-2 rounded-md"
            />
            <span *ngIf="!expense.isEditing">{{ expense.description }}</span>
          </td>
          <td tuiTd>
            <select
              *ngIf="expense.isEditing"
              [(ngModel)]="expense.category"
              class="border-2 border-stone-300 p-2 rounded-md"
            >
              <option value="Groceries">Groceries</option>
              <option value="Entertainment">Entertainment</option>
              <option value="Studies">Studies</option>
              <option value="Health">Health</option>
            </select>
            <span *ngIf="!expense.isEditing">{{ expense.category }}</span>
          </td>
          <td tuiTd>
            <input
              *ngIf="expense.isEditing"
              [(ngModel)]="expense.cost"
              type="number"
              class="border-2 border-stone-300 p-2 rounded-md"
            />
            <span *ngIf="!expense.isEditing">Rs.{{ expense.cost | tuiFormatNumber }}</span>
          </td>
          <td tuiTd>
            <tui-svg
              *ngIf="!expense.isEditing"
              (click)="expense.isEditing = true"
              [src]="tuiIconEdit3"
              class="text-stone-500 cursor-pointer select-none mx-2"
              role="button"
            />
            <tui-svg
              *ngIf="expense.isEditing"
              (click)="saveEdits(expense)"
              [src]="tuiIconCheck"
              class="text-stone-500 cursor-pointer select-none mx-2"
              role="button"
            />
            <tui-svg
              (click)="deleteRow(expense)"
              [src]="tuiIconTrash"
              class="text-stone-500 cursor-pointer select-none mx-2"
              role="button"
            />
          </td>
        </tr>
      </ng-container>

      <ng-template #filteredExpensesBlock>
        <tr *ngFor="let expense of expenses">
          <td tuiTd>
            <input
              *ngIf="expense.isEditing"
              [(ngModel)]="expense.date"
              type="date"
              class="border-2 border-stone-300 p-2 rounded-md"
            />
            <span *ngIf="!expense.isEditing">{{ expense.date }}</span>
          </td>
          <td tuiTd>
            <input
              *ngIf="expense.isEditing"
              [(ngModel)]="expense.description"
              type="text"
              class="border-2 border-stone-300 p-2 rounded-md"
            />
            <span *ngIf="!expense.isEditing">{{ expense.description }}</span>
          </td>
          <td tuiTd>
            <select
              *ngIf="expense.isEditing"
              [(ngModel)]="expense.category"
              class="border-2 border-stone-300 p-2 rounded-md"
            >
              <option value="Groceries">Groceries</option>
              <option value="Entertainment">Entertainment</option>
              <option value="Studies">Studies</option>
              <option value="Health">Health</option>
            </select>
            <span *ngIf="!expense.isEditing">{{ expense.category }}</span>
          </td>
          <td tuiTd>
            <input
              *ngIf="expense.isEditing"
              [(ngModel)]="expense.cost"
              type="number"
              class="border-2 border-stone-300 p-2 rounded-md"
            />
            <span *ngIf="!expense.isEditing">Rs.{{ expense.cost | tuiFormatNumber }}</span>
          </td>
          <td tuiTd>
            <tui-svg
              *ngIf="!expense.isEditing"
              (click)="expense.isEditing = true"
              [src]="tuiIconEdit3"
              class="text-stone-500 cursor-pointer select-none mx-2"
              role="button"
            />
            <tui-svg
              *ngIf="expense.isEditing"
              (click)="saveEdits(expense)"
              [src]="tuiIconCheck"
              class="text-stone-500 cursor-pointer select-none mx-2"
              role="button"
            />
            <tui-svg
              (click)="deleteRow(expense)"
              [src]="tuiIconTrash"
              class="text-stone-500 cursor-pointer select-none mx-2"
              role="button"
            />
          </td>
        </tr>
      </ng-template>
      </tbody>
    </table></div></div>
